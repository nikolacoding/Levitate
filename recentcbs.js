/* opponent, scoreus, scorethem, datetime, lineup[] */

var cbarray = [
    
[
    "Arsin", "W", "DQ", "29.8.2020 @ 17:00", "1", [
        "Eli", "Veqma", "Durian", "Seijaru", "MG"],
        [5, 3, 2, 3, 2], "Friendly"
],
[
    "Purification", "5", "0", "30.8.2020. @ 17:00", "2", [
        "Aspect", "Veqma", "Jellevk", "Rexehh", "N/A"],
        [7, 3, 2, 3, 2], "Friendly"
],
[
    "Arsin", "12", "0", "6.9.2020 @ 17:00", "3", [
        "Seijaru/DexterousLogic", "Eli/Veqma", "N/A", "N/A", "N/A"],
        [14, 4, 2, 3, 2], "Friendly"
],
[
    "Gallant", "1", "0", "26.9.2020 @ 17:00", "4", [
        "Eli", "Aspect", "DexterousLogic", "$aucePot", "Veqma"],
        [2, 2, 2, 2, 7], "Friendly"
],
[
    "Obvious", "3", "0", "26.9.2020 @ 18:00", "5", [
        "Eli", "Aspect", "DexterousLogic", "$aucePot", "Veqma"],
        [4, 4, 3, 3, 1], "DBL"
],
[
    "M3L33+", "W", "DQ", "17.10.2020 @ 19:00", "6", [
        "Eli", "HoKermit", "Durian", "MiniKMarty", "DexterousLogic"],
        [7, 3, 2, 3, 2], "DBL"
],
[
    "Ascenders of Asgard", "0", "1", "7.11.2020 @ 20:00", "7", [
        "Eli", "Hero", "Veqma", "SaucePot", "DexterousLogic"],
        [6, 3, 2, 1, 2], "DBL"
],
[
    "Poseidons Night", "9", "0", "16.11.2020 @ 20:00", "8", [
        "Hero", "Eli", "MURSH", "N/A", "N/A"],
        [5, 7, 3, 0, 0], "Friendly"
],
[
    "Gallant", "5", "0", "21.11.2020 @ 20:00", "9", [
        "Eli", "Durian", "Kermit", "dawid", "N/A"],
        [4, 4, 5, 2, 0], "Friendly"
],
[
    "Poseidons Night (BO3)", "9", "0 (2-0)", "22.11.2020 @ 20:00", "10", [
        "Eli", "Durian", "Hero", "Kermit", "Veqma"],
        [12, 9, 4, 3, 5], "Friendly"
],
[
    "Cosplay & Art", "W", "DQ", "26.11.2020 @ 17:00", "11", [
        "Eli", "HoKermit", "Durian", "MiniKMarty", "DexterousLogic"],
        [7, 3, 2, 3, 2], "Friendly"
],
[
    "Anyways", "W", "DQ", "26.11.2021 @ 16:00", "12", [
        "Eli", "HoKermit", "Durian", "MiniKMarty", "DexterousLogic"],
        [7, 3, 2, 3, 2], "Friendly"
],
[
    "Armonia", "3", "0", "27.11.2020 @ 20:00", "13", [
        "Hypno", "Dute", "Heydn", "Haze", "Guffe"],
        [3, 2, 8, 0, 2], "Friendly"
],
[
    "Purification", "11", "0", "28.11.2020 @ 20:00", "14", [
        "semi-DQ", "N/A", "N/A", "N/A", "N/A"],
        [15, 2, 2, 3, 2], "Friendly"
],
[
    "Poseidons Night", "W", "DQ", "29.11.2020 @ 19:00", "15", [
        "Eli", "HoKermit", "Durian", "MiniKMarty", "DexterousLogic"],
        [7, 3, 2, 3, 2], "DBL"
],
[
    "Demon Slayers", "3", "0", "5.12.2020 @ 19:00", "16", [
        "EDGY", "MiniKMarty", "dawid", "Hypno", "Hero"],
        [7, 3, 2, 3, 2], "Friendly"
],
[
    "Mysticis", "W", "DQ", "6.12.2020 @ 19:00", "17", [
        "Eli", "HoKermit", "Durian", "MiniKMarty", "DexterousLogic"],
        [7, 3, 2, 3, 2], "DBL"
],
[
    "Tews", "2", "0", "12.12.2020 @ 19:00", "18", [
        "Unknown", "Unknown", "Unknown", "Unknown", "Durian"],
        [0, 0, 0, 0, 6], "Friendly"
],
[
    "BOP", "DQ", "L", "12.12.2020 @ 20:00", "19", [
        "Eli", "HoKermit", "Durian", "MiniKMarty", "DexterousLogic"],
        [7, 3, 2, 3, 2], "DBL"
],
[
    "Frost", "2", "0", "20.12.2020 @ 20:00", "20", [
        "Eli", "Cephy", "Durian", "Veqma", "Seijaru"],
        [7, 2, 2, 1, 3], "DBL"
],
[
    "Vinheim", "0", "7", "21.12.2020 @ 20:00", "21", [
        "Veqma", "Seijaru", "Durian", "Aspect", "MURSH"],
        [2, 2, 2, 1, 1], "Friendly"
],
[
    "Gallant", "11", "0", "25.12.2020 @ 20:00", "22", [
        "Eli", "Durian", "N/A", "N/A", "N/A"],
        [5, 10, 0, 0, 0], "Friendly"
],
[
    "M3L33", "7", "0", "26.12.2020 @ 20:00", "23", [
        "Ivy Haze", "MiniKMarty", "Cryypto", "N/A", "N/A"],
        [4, 9, 2, 0, 0], "Friendly"
],
[
    "M3L33", "5", "0", "28.12.2020 @ 20:00", "24", [
        "Ivy Haze", "MiniKMarty", "Cryypto", "N/A", "N/A"],
        [4, 9, 2, 0, 0], "In-house", "Team Eli", "Team Durian"
],
[
    "Tews", "5", "0", "10.1.2021 @ 20:00", "25", [
        "Seijaru", "Eli", "DexterousLogic", "MG", "N/A"],
        [2, 6, 5, 2, 0], "Friendly"
],
[
    "The Comedy Zone", "0", "1", "14.1.2021 @ 20:00", "26", [
        "Hypno", "Guffe", "SaucePot", "MiniKMarty", "Dawid"],
        [3, 1, 2, 4, 5], "Friendly"
],
[
    "Armonia", "10", "0", "15.1.2021 @ 21:00", "27", [
        "Hypno", "MiniK", "Amin", "N/A", "N/A"],
        [8, 6, 1, 4, 5], "Friendly"
],
[
    "Reversal", "W", "DQ", "16.1.2021 @ 20:00", "28", [
        "Hypno", "MiniK", "Amin", "N/A", "N/A"],
        [8, 6, 1, 4, 5], "Friendly"
],
[
    "Levitate", "2", "0", "16.1.2021 @ 20:00", "29", [
        "Hypno", "MiniK", "Amin", "N/A", "N/A"],
        [8, 6, 1, 4, 5], "In-house", "Team Sauce", "Team MiniK"
]
];

function CBarrayToString(array){

    str = "";

    if (array[7] != "In-house"){
        if (array[2] == "DQ"){
            str += '<span class="noentry">';
            str += "<p class='cbtitle' id='noentry'>Levitate vs " + array[0] + "</p>";
            str += '</span>';
        }
        else if (array[1] == "DQ"){
            str += '<span class="noentry">';
            str += "<p class='cbtitle' id='noentry'>Levitate vs " + array[0] + "</p>";
            str += '</span>';
        }
        else{
            str += '<span class="entry">';
            str += "<p class='cbtitle' onclick='ShowPopup(" + array[4] + ")'>Levitate vs " + array[0] + "</p>";
            str += '</span>';
        }
    }
    else{
        str += '<span class="noentry">';
        str += "<p class='cbtitle' id='noentry'>" + array[8] + " vs " + array[9] + "</p>";
        str += '</span>';
    }

    str += "<p class='cbresult'>" + array[1] + "-" + array[2] + "</p>";
    
    scoreUs = parseInt(array[1]);
    scoreThem = parseInt(array[2]);

    if (array[1] == "W"){
        scoreUs = 1;
        scoreThem = 0;
    }

    if (array[7] != "In-house"){
        if (scoreUs > scoreThem){
            str += "<p class='cbvictory'>Victory</p>";
        }
        else{
            str += "<p class='cbdefeat'>Defeat</p>"; 
        }
    }

    switch (array[7]){
        case "DBL":
            str += "<p id='cbtype'><span class='cbdbl'>DBL</span></p>";
            break;
        case "Friendly":
            str += "<p id='cbtype'><span class='cbfriendly'>Friendly</span></p>";
            break;
        case "In-house":
            str += "<p id='cbtype'><span class='cbinhouse'>In-house</span></p>";
            break;
    }

    str += "<p class='cbdatetime'>" + array[3] + "</p>";
    return str;
}

var highlight;

function ShowPopup(id){
    popup = document.getElementById("popup");
    popup.style.visibility = "visible";
    popup.style.opacity = "1";

    p1 = document.getElementById("p1");
    p2 = document.getElementById("p2");
    p3 = document.getElementById("p3");
    p4 = document.getElementById("p4");
    p5 = document.getElementById("p5");
    datetime = document.getElementById("datetime");
    mvp = document.getElementById("mvp");
    cbstatus = document.getElementById("cbstatus");
    cbtypespan = document.getElementById("cbtypespan");

    p1.innerHTML = cbarray[id - 1][5][0] + " - " + cbarray[id - 1][6][0] + " stocks"
    p2.innerHTML = cbarray[id - 1][5][1] + " - " + cbarray[id - 1][6][1] + " stocks"
    p3.innerHTML = cbarray[id - 1][5][2] + " - " + cbarray[id - 1][6][2] + " stocks"
    p4.innerHTML = cbarray[id - 1][5][3] + " - " + cbarray[id - 1][6][3] + " stocks"
    p5.innerHTML = cbarray[id - 1][5][4] + " - " + cbarray[id - 1][6][4] + " stocks"
    datetime.innerHTML = cbarray[id - 1][3];

    stocksUs = parseInt(cbarray[id - 1][1]);
    stocksThem = parseInt(cbarray[id - 1][2]);

    switch (cbarray[id - 1][7]){
        case "DBL":
            cbtypespan.style.color = "orange";
            cbtypespan.innerHTML = "DBL";
            break;

        case "Friendly":
            cbtypespan.style.color = "gray";
            cbtypespan.innerHTML = "Friendly";
            break;

        case "In-house":
            cbtypespan.style.color = "cyan";
            cbtypespan.innerHTML = "In-house";
            break;
    }

    if (stocksUs > stocksThem){
        cbstatus.innerHTML = "Victory";
        cbstatus.style.color = "green";
    }
    else{
        cbstatus.innerHTML = "Defeat";
        cbstatus.style.color = "red";
    }

    if (cbarray[id - 1][5][0] == "N/A"){
        p1.innerHTML = "";
    }
    if (cbarray[id - 1][5][1] == "N/A"){
        p2.innerHTML = "";
    }
    if (cbarray[id - 1][5][2] == "N/A"){
        p3.innerHTML = "";
    }
    if (cbarray[id - 1][5][3] == "N/A"){
        p4.innerHTML = "";
    }
    if (cbarray[id - 1][5][4] == "N/A"){
        p5.innerHTML = "";
    }

    highest = 0;
    highestIter = 0;
    for (var i = 0; i < 5; i++){
        if (cbarray[id - 1][6][i] > highest){

            highest = cbarray[id - 1][6][i];
            mvp.innerHTML = "MVP: " + cbarray[id - 1][5][i];
            highestIter = i;
        } 
    }

    num = parseInt(highestIter) + 1
    highlightStr = "p" + num + " = document.getElementById('p" + num + "');"
    highlight = eval(highlightStr);
    highlight.style.color = "green";

    imageHolder = document.getElementById("content");

    switch(randInt(1, 4)){
        case 1:
        imageHolder.style.backgroundImage = "url('Data/CBbg.png')";
        break;
        case 2:
        imageHolder.style.backgroundImage = "url('Data/CBbg1.png')";
        break;
        case 3:
        imageHolder.style.backgroundImage = "url('Data/CBbg2.png')";
        break;
        case 4:
        imageHolder.style.backgroundImage = "url('Data/CBbg3.png')";
        break;
    }
    
}

function HidePopup(){
    popup = document.getElementById("popup");
    popup.style.visibility = "hidden";
    popup.style.opacity = "0";
    highlight.style.color = "white";
}

var timesMoved = 1;

function MoveNavbar(pixels){
    navbar = document.getElementById("navbar");
    navbar.style.backgroundPositionX = timesMoved * pixels + "px";
    navbar.style.backgroundPositionY = -timesMoved * pixels + "px";
    timesMoved++;
}

function randInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1) ) + min;
}

window.onload = function(){

    finalstr = "";

    for (var i = cbarray.length - 1; i >= 0; i--){
        finalstr += CBarrayToString(cbarray[i]);
    }

    document.getElementById("cbresults").innerHTML = finalstr;

    setInterval(function(){ MoveNavbar(5) }, 75)
}